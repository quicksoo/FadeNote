# FadeNote v1 README

> 本 README **基于当前已有代码实现**（main.rs / main.js / index.html / archive.html 等），
> 目标读者是 **参与实现与优化的工程师（qorder）**，而不是最终用户。
>
> 目的只有一个：
> **在不改产品方向、不引入新概念的前提下，把 FadeNote v1 打磨到可发布状态。**

---

## 1. 项目定位（一句话）

FadeNote 是一个 **会自动淡出的桌面便签**。

* 不是任务管理器
* 不是长期笔记工具
* 不要求用户整理
* 默认让内容自然消失

FadeNote 的核心价值不是“记住”，而是 **“放心写下，然后放下”**。

---

## 2. v1 的设计哲学（必须遵守）

在任何优化或补充实现前，请先对齐以下原则：

1. **弱存在感**

   * 不打断用户
   * 不强引导
   * 不教育用户

2. **生命周期优先于 UI**

   * 所有功能都服务于 note 的生命周期
   * 窗口只是表现层

3. **可恢复，但不强调管理**

   * 内容不会轻易丢失
   * 但也不会强迫用户维护

---

## 3. 核心概念说明（统一语义）

### 3.1 Note（便签）

* 以 Markdown 文件为内容载体
* index.json 为状态索引
* Note 是系统中的一等公民

### 3.2 Window（窗口）

* Window 只是 Note 的一个展示方式
* 关闭窗口 ≠ 删除 Note

---

## 4. 四个窗口按钮的最终语义（请勿自行修改）

### 🔴 Close（关闭）

* 只关闭窗口
* Note 仍为 active
* 可通过 Tray / Show Notes 恢复

---

### 🟡 Minimize（最小化）

* 仅最小化窗口
* 不触发任何状态变化

---

### 🟢 Always on Top（置顶）

* **仅窗口行为**
* 不写入 index.json
* 窗口关闭后自动失效
* 重新打开窗口默认不置顶

---

### 📌 Pin（固定）

* **生命周期行为**
* Pin 后的 Note：

  * 永不自动过期
  * 永不自动归档
* Pin 状态必须落盘
* Pin ≠ 置顶，二者完全解耦

---

## 5. Note 生命周期模型（v1）

### 5.1 状态集合

* active：当前有效的便签
* archived：已归档，不在桌面显示
* expired：生命周期结束（v1 中等同于 archived 处理）
* pinned：特殊标记，可叠加在 active 上

---

### 5.2 生命周期核心规则（必须遵守）

1. **非 Pin 的 Note**

   * 长时间未编辑后进入 expire 流程
   * expire 后进入 archived

2. **Pin 的 Note**

   * 不参与任何 expire 判断
   * expireAt 必须为 null

3. **Unpin 行为**

   * 重新计算 expireAt（如：now + 7 days）

---

## 6. 首次启动行为（v1 必须实现）

### 6.1 首次便签的存在意义

首次启动时，系统会自动创建一张 **普通 Note**，用于向用户传达 FadeNote 的核心理念。

### 6.2 首次便签文案（不可改写语义）

> 写点什么吧。
>
> 这张便签会自动保存。
> 关掉窗口，也不会立刻消失。
>
> 一段时间后，
> 它会悄悄淡出。
>
> 需要的时候，
> 可以从托盘里再叫回来。

### 6.3 行为要求

* 文案作为普通文本存在
* 用户首次输入后可被完全覆盖
* 不作为系统提示存储
* 不重复生成

---

## 7. Tray（系统托盘）职责

Tray 是 FadeNote 的唯一全局入口。

v1 Tray 必须包含：

* New Note：新建一张 Note 并立刻打开窗口
* Show Notes：恢复当前存在但无窗口的 active Note
* Archive：打开归档列表窗口
* Quit：安全退出应用（保存所有状态）

---

## 8. Archive（归档）窗口定义

### 8.1 Archive 的意义

* Archive ≠ 删除
* Archive 是“暂时不在桌面出现”

### 8.2 v1 Archive 的最低能力

* 展示所有 archived Notes
* 点击可恢复为 active 并打开窗口

---

## 9. 明确不属于 v1 的内容

以下内容请不要在 v1 中引入：

* 搜索
* 标签 / 分类
* 富文本编辑
* 删除（Delete）
* 设置页
* 同步 / 云端

---

## 10. v1 完成判断清单（交付标准）

在提交 v1 前，请逐项确认：

* [ ] Pin 与 置顶完全解耦
* [ ] Pin 会打断所有过期逻辑
* [ ] 关闭窗口的 Note 可通过 Tray 恢复
* [ ] 首次便签文案正确展示
* [ ] Tray 功能完整且稳定
* [ ] Quit 前状态安全落盘

---

## 11. 最重要的一句话（给实现者）

FadeNote 不是一个“功能驱动”的产品。

**任何实现上的便利，如果破坏了生命周期语义，请以语义为准。**

这是 FadeNote 能长期成立的唯一前提。
